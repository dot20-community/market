// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

enum Status {
  PENDING
  CANCELED
  LISTING
  LOCKED
  SOLD
  FAILED
}

enum ChainStatus {
  PENDING
  BLOCK_CONFIRMED
  BLOCK_FAILED
  INSCRIBE_CONFIRMED
  INSCRIBE_FAILED
}

model Order {
  id           BigInt      @id @default(autoincrement())
  seller       String      @db.VarChar(64)
  buyer        String?     @db.VarChar(64)
  tick         String      @db.VarChar(16)
  amount       BigInt
  status       Status      @default(PENDING)
  chainStatus  ChainStatus @default(PENDING) @map("chain_status")
  failReason   String?     @map("fail_reason")
  totalPrice   BigInt      @map("total_price")
  serviceFee   BigInt      @default(0) @map("service_fee")
  realPayPrice BigInt      @default(0) @map("real_pay_price")
  gasFee       BigInt      @default(0) @map("gas_fee")
  txHash       String?     @map("tx_hash")
  listingAt    DateTime?   @map("listing_at")
  soldAt       DateTime?   @map("sold_at")
  canceledAt   DateTime?   @map("canceled_at")
  createdAt    DateTime    @default(now()) @map("created_at")
  updatedAt    DateTime    @default(now()) @updatedAt @map("updated_at")

  @@index([txHash])
  @@index([seller])
  @@map("order")
}
